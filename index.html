<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorting Game</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Added Google Fonts for enhanced typography -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@400&display=swap" rel="stylesheet">
    <!-- AdSense script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4887565612343348"
     crossorigin="anonymous"></script>
</head>
<body>
    <div id="game-container"></div>
    <div id="start-screen">
        <h1>Conveyor Sort</h1>
        <p>For all support and bug reports, please email <a href="mailto:beltbusterio@gmail.com">beltbusterio@gmail.com</a></p>
        <div class="columns">
            <div class="column-left">
                <button id="start-button">Start</button>
                <button id="level-select-button">Level Select</button>
                <button id="instructions-button">How to Play</button>
                <button id="achievements-button">Achievements</button>
            </div>
            <div class="column-right">
                <button id="power-ups-button">Power-Ups</button>
                <button id="settings-button-start">Settings</button>
                <button id="stats-button">Stats</button>
                <button id="updates-button">Updates</button>
                <button id="leaderboard-button">Leaderboard</button>
            </div>
        </div>
        <div id="start-ad" class="ad-container" style="width: 300px; height: 250px; margin: 20px auto;"></div>
        <p>Created by Goldie 2025</p>
        <p id="version-text">Alpha v0.44</p>
    </div>
    <div id="leaderboard-screen" style="display: none;">
        <h2>Leaderboard</h2>
        <div id="leaderboard-list"></div>
        <button id="back-to-start-from-leaderboard">Back</button>
    </div>
    <div id="stats-screen" style="display: none;">
        <h2>Player Stats</h2>
        <ul class="stats-list">
            <li class="stat-item">Total Items Sorted: <span id="total-sorted">0</span></li>
            <li class="stat-item">Red Cubes Sorted: <span id="red-sorted">0</span></li>
            <li class="stat-item">Blue Triangles Sorted: <span id="blue-sorted">0</span></li>
            <li class="stat-item">Yellow Spheres Sorted: <span id="yellow-sorted">0</span></li>
            <li class="stat-item">Green Cones Sorted: <span id="green-sorted">0</span></li>
            <li class="stat-item">Levels Failed: <span id="levels-failed">0</span></li>
            <li class="stat-item">Total Hours Played: <span id="total-hours-played">0.00</span></li>
            <li class="stat-item">Player Level: <span id="player-level">1</span></li>
            <li class="stat-item">XP to Next Level: <span id="xp-to-next">0 / 100</span></li>
        </ul>
        <button id="back-to-start-from-stats">Back</button>
    </div>
    <div id="achievements-screen" style="display: none;">
        <h2>Achievements</h2>
        <div class="tabs">
            <button class="tab-button" data-difficulty="easy">Easy</button>
            <button class="tab-button" data-difficulty="medium">Medium</button>
            <button class="tab-button" data-difficulty="hard">Hard</button>
            <button class="tab-button" data-difficulty="expert">Expert</button>
        </div>
        <p id="achievement-counter"></p>
        <ul id="achievements-list"></ul>
        <button id="back-to-start-from-achievements">Back</button>
    </div>
    <div id="updates-screen" style="display: none;">
        <h2>Latest Updates</h2>
        <ul>
            <li><span class="update-version">Update v0.41</span> -
                <ul>
                    <li>Increased spawn rates for all powerups.</li>
                    <li>Added levels up to 45. Reduced amount of items required to pass level 36-45.</li>
                    <li>15 more levels coming soon!</li>
                    <li>Added more achievements</li>
                    <li>Visual enchancements, UI Upgrades.</li>
                    <li>Fixed an issue causing hours played to not be logged in stats properly.</li>
                </ul>
            </li>
            <li><span class="update-version">Update v0.42</span> -
                <ul>
                    <li>Added level progression to the game, Max Level 100 at this time.</li>
                    <li>More visual enchancements</li>
                    <li>Increased all power up spawn rates by 1%.</li>
                </ul>
            </li>
            <li><span class="update-version">Update v0.43</span> -
                <ul>
                    <li>Added usernames and leaderboards.</li>
                </ul>
            </li>
            <li><span class="update-version">Update v0.44</span> -
                <ul>
                    <li>Added top players for each level (most sorted).</li>
                    <li>Added 3 new powerups.</li>
                    <li>Fixed: Total Play Time Accuracy.</li>
                    <li>Fixed: Leaderboard issues.</li>
                </ul>
            </li>
        </ul>
        <button id="back-to-start-from-updates">Back</button>
    </div>
    <div id="level-select-screen" style="display: none;">
        <h2>Level Select</h2>
        <div id="level-columns">
            <div class="level-column">
                <button class="level-button" id="level-1-button">Level 1</button>
                <button class="level-button" id="level-2-button" disabled>Level 2 (Locked)</button>
                <button class="level-button" id="level-3-button" disabled>Level 3 (Locked)</button>
                <button class="level-button" id="level-4-button" disabled>Level 4 (Locked)</button>
                <button class="level-button" id="level-5-button" disabled>Level 5 (Locked)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-6-button" disabled>Level 6 (Locked)</button>
                <button class="level-button" id="level-7-button" disabled>Level 7 (Locked)</button>
                <button class="level-button" id="level-8-button" disabled>Level 8 (Locked)</button>
                <button class="level-button" id="level-9-button" disabled>Level 9 (Locked Ful)</button>
                <button class="level-button" id="level-10-button" disabled>Level 10 (Locked)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-11-button" disabled>Level 11 (Locked)</button>
                <button class="level-button" id="level-12-button" disabled>Level 12 (Locked)</button>
                <button class="level-button" id="level-13-button" disabled>Level 13 (Locked)</button>
                <button class="level-button" id="level-14-button" disabled>Level 14 (Locked)</button>
                <button class="level-button" id="level-15-button" disabled>Level 15 (Locked)</button>
            </div>
        </div>
        <div id="level-select-buttons">
            <button id="back-to-start">Back</button>
            <button id="next-page-button">Next Page</button>
        </div>
    </div>
    <div id="level-select-page-2" style="display: none;">
        <h2>Level Select (Page 2)</h2>
        <div id="level-columns-page-2">
            <div class="level-column">
                <button class="level-button" id="level-16-button" disabled>Level 16 (Coming Soon)</button>
                <button class="level-button" id="level-17-button" disabled>Level 17 (Coming Soon)</button>
                <button class="level-button" id="level-18-button" disabled>Level 18 (Coming Soon)</button>
                <button class="level-button" id="level-19-button" disabled>Level 19 (Coming Soon)</button>
                <button class="level-button" id="level-20-button" disabled>Level 20 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-21-button" disabled>Level 21 (Coming Soon)</button>
                <button class="level-button" id="level-22-button" disabled>Level 22 (Coming Soon)</button>
                <button class="level-button" id="level-23-button" disabled>Level 23 (Coming Soon)</button>
                <button class="level-button" id="level-24-button" disabled>Level 24 (Coming Soon)</button>
                <button class="level-button" id="level-25-button" disabled>Level 25 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-26-button" disabled>Level 26 (Coming Soon)</button>
                <button class="level-button" id="level-27-button" disabled>Level 27 (Coming Soon)</button>
                <button class="level-button" id="level-28-button" disabled>Level 28 (Coming Soon)</button>
                <button class="level-button" id="level-29-button" disabled>Level 29 (Coming Soon)</button>
                <button class="level-button" id="level-30-button" disabled>Level 30 (Coming Soon)</button>
            </div>
        </div>
        <div id="level-select-buttons-page-2">
            <button id="prev-page-button">Previous Page</button>
            <button id="next-page-button-page-2">Next Page</button>
            <button id="back-to-start-page-2">Back</button>
        </div>
    </div>
    <div id="level-select-page-3" style="display: none;">
        <h2>Level Select (Page 3)</h2>
        <div id="level-columns-page-3">
            <div class="level-column">
                <button class="level-button" id="level-31-button" disabled>Level 31 (Coming Soon)</button>
                <button class="level-button" id="level-32-button" disabled>Level 32 (Coming Soon)</button>
                <button class="level-button" id="level-33-button" disabled>Level 33 (Coming Soon)</button>
                <button class="level-button" id="level-34-button" disabled>Level 34 (Coming Soon)</button>
                <button class="level-button" id="level-35-button" disabled>Level 35 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-36-button" disabled>Level 36 (Coming Soon)</button>
                <button class="level-button" id="level-37-button" disabled>Level 37 (Coming Soon)</button>
                <button class="level-button" id="level-38-button" disabled>Level 38 (Coming Soon)</button>
                <button class="level-button" id="level-39-button" disabled>Level 39 (Coming Soon)</button>
                <button class="level-button" id="level-40-button" disabled>Level 40 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-41-button" disabled>Level 41 (Coming Soon)</button>
                <button class="level-button" id="level-42-button" disabled>Level 42 (Coming Soon)</button>
                <button class="level-button" id="level-43-button" disabled>Level 43 (Coming Soon)</button>
                <button class="level-button" id="level-44-button" disabled>Level 44 (Coming Soon)</button>
                <button class="level-button" id="level-45-button" disabled>Level 45 (Coming Soon)</button>
            </div>
        </div>
        <div id="level-select-buttons-page-3">
            <button id="prev-page-button-page-3">Previous Page</button>
            <button id="next-page-button-page-3">Next Page</button>
            <button id="back-to-start-page-3">Back</button>
        </div>
    </div>
    <div id="level-select-page-4" style="display: none;">
        <h2>Level Select (Page 4)</h2>
        <div id="level-columns-page-4">
            <div class="level-column">
                <button class="level-button" id="level-46-button" disabled>Level 46 (Coming Soon)</button>
                <button class="level-button" id="level-47-button" disabled>Level 47 (Coming Soon)</button>
                <button class="level-button" id="level-48-button" disabled>Level 48 (Coming Soon)</button>
                <button class="level-button" id="level-49-button" disabled>Level 49 (Coming Soon)</button>
                <button class="level-button" id="level-50-button" disabled>Level 50 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-51-button" disabled>Level 51 (Coming Soon)</button>
                <button class="level-button" id="level-52-button" disabled>Level 52 (Coming Soon)</button>
                <button class="level-button" id="level-53-button" disabled>Level 53 (Coming Soon)</button>
                <button class="level-button" id="level-54-button" disabled>Level 54 (Coming Soon)</button>
                <button class="level-button" id="level-55-button" disabled>Level 55 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-56-button" disabled>Level 56 (Coming Soon)</button>
                <button class="level-button" id="level-57-button" disabled>Level 57 (Coming Soon)</button>
                <button class="level-button" id="level-58-button" disabled>Level 58 (Coming Soon)</button>
                <button class="level-button" id="level-59-button" disabled>Level 59 (Coming Soon)</button>
                <button class="level-button" id="level-60-button" disabled>Level 60 (Coming Soon)</button>
            </div>
        </div>
        <div id="level-select-buttons-page-4">
            <button id="prev-page-button-page-4">Previous Page</button>
            <button id="next-page-button-page-4">Next Page</button>
            <button id="back-to-start-page-4">Back</button>
        </div>
    </div>
    <div id="level-select-page-5" style="display: none;">
        <h2>Level Select (Page 5)</h2>
        <div id="level-columns-page-5">
            <div class="level-column">
                <button class="level-button" id="level-61-button" disabled>Level 61 (Coming Soon)</button>
                <button class="level-button" id="level-62-button" disabled>Level 62 (Coming Soon)</button>
                <button class="level-button" id="level-63-button" disabled>Level 63 (Coming Soon)</button>
                <button class="level-button" id="level-64-button" disabled>Level 64 (Coming Soon)</button>
                <button class="level-button" id="level-65-button" disabled>Level 65 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-66-button" disabled>Level 66 (Coming Soon)</button>
                <button class="level-button" id="level-67-button" disabled>Level 67 (Coming Soon)</button>
                <button class="level-button" id="level-68-button" disabled>Level 68 (Coming Soon)</button>
                <button class="level-button" id="level-69-button" disabled>Level 69 (Coming Soon)</button>
                <button class="level-button" id="level-70-button" disabled>Level 70 (Coming Soon)</button>
            </div>
            <div class="level-column">
                <button class="level-button" id="level-71-button" disabled>Level 71 (Coming Soon)</button>
                <button class="level-button" id="level-72-button" disabled>Level 72 (Coming Soon)</button>
                <button class="level-button" id="level-73-button" disabled>Level 73 (Coming Soon)</button>
                <button class="level-button" id="level-74-button" disabled>Level 74 (Coming Soon)</button>
                <button class="level-button" id="level-75-button" disabled>Level 75 (Coming Soon)</button>
            </div>
        </div>
        <div id="level-select-page-6" style="display: none;">
            <h2>Level Select (Page 6)</h2>
            <div id="level-columns-page-6">
                <div class="level-column">
                    <button class="level-button" id="level-76-button" disabled>Level 76 (Coming Soon)</button>
                    <button class="level-button" id="level-77-button" disabled>Level 77 (Coming Soon)</button>
                    <button class="level-button" id="level-78-button" disabled>Level 78 (Coming Soon)</button>
                    <button class="level-button" id="level-79-button" disabled>Level 79 (Coming Soon)</button>
                    <button class="level-button" id="level-80-button" disabled>Level 80 (Coming Soon)</button>
                </div>
                <div class="level-column">
                    <button class="level-button" id="level-81-button" disabled>Level 81 (Coming Soon)</button>
                    <button class="level-button" id="level-82-button" disabled>Level 82 (Coming Soon)</button>
                    <button class="level-button" id="level-83-button" disabled>Level 83 (Coming Soon)</button>
                    <button class="level-button" id="level-84-button" disabled>Level 84 (Coming Soon)</button>
                    <button class="level-button" id="level-85-button" disabled>Level 85 (Coming Soon)</button>
                </div>
                <div class="level-column">
                    <button class="level-button" id="level-86-button" disabled>Level 86 (Coming Soon)</button>
                    <button class="level-button" id="level-87-button" disabled>Level 87 (Coming Soon)</button>
                    <button class="level-button" id="level-88-button" disabled>Level 88 (Coming Soon)</button>
                    <button class="level-button" id="level-89-button" disabled>Level 89 (Coming Soon)</button>
                    <button class="level-button" id="level-90-button" disabled>Level 90 (Coming Soon)</button>
                </div>
            </div>
            <div id="level-select-buttons-page-6">
                <button id="prev-page-button-page-6">Previous Page</button>
                <button id="back-to-start-page-6">Back</button>
            </div>
        </div>
        <div id="level-select-buttons-page-5">
            <button id="prev-page-button-page-5">Previous Page</button>
            <button id="next-page-button-page-5">Next Page</button>
            <button id="back-to-start-page-5">Back</button>
        </div>
    </div>
    <div id="level-start-screen" style="display: none;">
        <h2>Level <span id="selected-level-number">1</span></h2>
        <button id="level-start-button">Start</button>
        <button id="back-to-level-select-from-start">Back to Level Select</button>
        <button id="back-to-main-menu-from-start">Back to Main Menu</button>
    </div>
    <div id="game-ui" style="display: none;">
        <div id="title">Conveyor Sort</div>
        <div id="level-display">Level 1</div>
        <div id="lives-container">
            <span id="lives-text">Lives: 3</span>
            <span class="heart" id="heart1">♥</span>
            <span class="heart" id="heart2">♥</span>
            <span class="heart" id="heart3">♥</span>
        </div>
        <div id="needed-container">
            Items needed for next level: <span id="needed-count">0</span>/<span id="needed-total">15</span>
            <div id="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
        </div>
        <div id="top-sorted-container">
            Top Sorted: <span id="top-sorted-count">0</span>
        </div>
        <div id="top-player-container">
            Top Player: <span id="top-player-name">Loading...</span> - <span id="top-player-score">0</span>
        </div>
        <div id="power-up-status" style="display: none;"></div>
        <div id="player-level-display">Level: 1</div>
        <div id="xp-display">XP: 0 / 100</div>
        <div id="version-container">Alpha v0.44</div>
        <button id="restart-button">Restart Game</button>
        <button id="pause-resume-button">Pause</button>
        <button id="end-level-button" style="display: none;">Complete Level</button>
        <button id="use-power-up-button">Use Power-Up</button>
    </div>
    <div id="pause-screen" style="display: none;">
        <h2>Paused</h2>
        <button id="resume-button">Resume</button>
        <button id="settings-button-pause">Settings</button>
        <button id="back-to-start-pause">Back to Start</button>
        <div id="pause-ad" class="ad-container" style="width: 300px; height: 250px; margin: 20px auto;"></div>
        <p>For all support and bug reports, please email <a href="mailto:beltbusterio@gmail.com">beltbusterio@gmail.com</a></p>
    </div>
    <div id="game-over-screen" style="display: none;">
        <h2>Level Failed</h2>
        <p>You sorted <span id="game-over-sort-count">0</span> out of <span id="game-over-needed-count">15</span> items needed!</p>
        <button id="restart-from-game-over">Restart Level</button>
        <button id="back-to-start-from-game-over">Back to Start</button>
        <div id="gameover-ad" class="ad-container" style="width: 300px; height: 250px; margin: 20px auto;"></div>
    </div>
    <div id="level-complete-screen" style="display: none;">
        <h2>Level <span id="completed-level">1</span> Complete!</h2>
        <p>You sorted <span id="level-complete-sort-count">0</span> items!</p>
        <button id="start-next-level">Start Level <span id="next-level">2</span></button>
        <button id="back-to-level-select">Back to Level Selection</button>
        <button id="settings-from-level-complete">Settings</button>
        <button id="back-to-main-menu">Main Menu</button>
    </div>
    <div id="instructions-screen" style="display: none;">
        <h2>How to Play</h2>
        <h3>Basics</h3>
        <p>Drag items to matching bins: red cubes to red, blue triangles to blue, yellow spheres to yellow (from Level 10). Sort enough items (e.g., 15 for Level 1) to unlock the next level. Miss or sort wrong, lose a life (3 per level). Lose all lives to fail.</p>
        <button id="back-instructions">Back</button>
    </div>
    <div id="power-ups-screen" style="display: none;">
        <h2>Power-Ups</h2>
        <p>Rare stars spawn with different effects when sorted into any bin:</p>
        <ul>
            <li><img src="slow_conveyor.png" alt="Slow Conveyor" width="50"> <strong>Purple ("Slow Conveyor")</strong>: Slows the belt for 5 seconds. <span class="power-up-count" data-type="slow">0</span></li>
            <li><img src="speed_boost.png" alt="Speed Boost" width="50"> <strong>Green ("Speed Boost")</strong>: Doubles the belt speed for 5 seconds—challenge mode! <span class="power-up-count" data-type="speed">0</span></li>
            <li><img src="extra_life.png" alt="Extra Life" width="50"> <strong>Orange ("Extra Life")</strong>: Adds one life (max 3). <span class="power-up-count" data-type="extraLife">0</span></li>
            <li><img src="freeze.png" alt="Freeze" width="50"> <strong>Cyan ("Freeze")</strong>: Stops the belt for 3 seconds. <span class="power-up-count" data-type="freeze">0</span></li>
            <li><img src="auto_sort.png" alt="Auto Sort" width="50"> <strong>Blue ("Auto Sort")</strong>: Automatically sorts the next 5 items correctly. <span class="power-up-count" data-type="autoSort">0</span></li>
            <li><img src="magnet.png" alt="Magnet" width="50"> <strong>Red ("Magnet")</strong>: Attracts all items to the cursor for 5 seconds. <span class="power-up-count" data-type="magnet">0</span></li>
            <li><img src="speed_surge.png" alt="Speed Surge" width="50"> <strong>Pink ("Speed Surge")</strong>: Triples conveyor and spawn speed for 5 seconds. <span class="power-up-count" data-type="speedSurge">0</span></li>
        </ul>
        <p>More power-ups coming soon!</p>
        <div id="power-ups-3d"></div>
        <button id="back-power-ups">Back</button>
    </div>
    <div id="settings-screen" style="display: none;">
        <h2>Settings</h2>
        <label><input type="checkbox" id="mute-sounds"> Mute Game Sounds</label>
        <label>Game Sounds Volume: <input type="range" id="sounds-volume" min="0" max="1" step="0.1" value="1"></label>
        <label><input type="checkbox" id="mute-music"> Mute Music</label>
        <label>Music Volume: <input type="range" id="music-volume" min="0" max="1" step="0.1" value="1"></label>
        <p>Username: <span id="current-username"></span></p>
        <input type="text" id="new-username" placeholder="Enter new username">
        <button id="change-username">Change Username</button>
        <p id="username-message" style="display: none;"></p>
        <button id="reset-game-data">Reset Game Data</button>
        <button id="close-settings">Close</button>
        <p id="game-paused-text" style="display: none;">Game Paused</p>
    </div>
    <button id="dev-tools-button">Dev Tools</button>
    <div id="dev-tools-bubble" style="display: none;">
        <h3>Developer Tools</h3>
        <button id="unlock-all-button">Unlock All Levels</button>
        <button id="spawn-power-up-button">Spawn Power Up</button>
        <button id="close-dev-tools">Close</button>
        <p id="dev-game-paused" style="display: none;">Game Paused</p>
    </div>
    <div id="power-up-menu" style="display: none;">
        <h3>Select Power-Up</h3>
        <button id="spawn-slow-conveyor">Slow Conveyor</button>
        <button id="spawn-speed-boost">Speed Boost</button>
        <button id="spawn-extra-life">Extra Life</button>
        <button id="spawn-freeze">Freeze</button>
        <button id="spawn-auto-sort">Auto Sort</button>
        <button id="spawn-magnet">Magnet</button>
        <button id="spawn-speed-surge">Speed Surge</button>
        <div id="power-up-menu-buttons">
            <button id="back-to-dev-tools">Back to Dev Tools</button>
            <button id="close-power-up-menu">Close</button>
        </div>
    </div>
    <div id="player-power-up-menu" style="display: none;">
        <h3>Select Power-Up to Use</h3>
        <button id="use-slow" data-type="slow">Slow Conveyor (<span id="use-slow-count">0</span>)</button>
        <button id="use-speed" data-type="speed">Speed Boost (<span id="use-speed-count">0</span>)</button>
        <button id="use-extraLife" data-type="extraLife">Extra Life (<span id="use-extraLife-count">0</span>)</button>
        <button id="use-freeze" data-type="freeze">Freeze (<span id="use-freeze-count">0</span>)</button>
        <button id="use-autoSort" data-type="autoSort">Auto Sort (<span id="use-autoSort-count">0</span>)</button>
        <button id="use-magnet" data-type="magnet">Magnet (<span id="use-magnet-count">0</span>)</button>
        <button id="use-speedSurge" data-type="speedSurge">Speed Surge (<span id="use-speedSurge-count">0</span>)</button>
        <button id="back-to-game">Back</button>
    </div>
    <div id="spawn-notification" style="display: none;"></div>
    <audio id="sort-success" src="chime.wav" preload="auto"></audio>
    <audio id="sort-fail" src="buzz.wav" preload="auto"></audio>
    <audio id="level-success" src="level_success.wav" preload="auto"></audio>
    <audio id="game-music" src="gamemusic.wav" preload="auto" loop></audio>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="game.js"></script>
</body>
</html>